#include "bootstrap.h"

# nobits option is required to move kernel stack to BSS section.
# BSS section is the place for stack since it's collapsed in ELF binaries.
.section .kernel_stack, "aw", @nobits
__kernel_stack_bottom:
.skip KERNEL_STACK_SIZE
__kernel_stack_top:

.text
.global _start_kernel
_start_kernel:
	movl $__kernel_stack_top, %esp

	call kernel_main

	cli
	hlt

_could_not_start:
	jmp _could_not_start

